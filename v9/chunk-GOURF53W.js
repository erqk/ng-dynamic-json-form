import{B as T,C as k,N as S,O as U,Q as B}from"./chunk-N343CZDZ.js";import{Db as _,Fb as b,Hb as l,Ma as s,Pb as M,Pc as P,Qb as F,Tc as V,Xc as H,_a as D,dc as E,ec as x,fc as v,ka as u,la as f,nb as p,ob as h,qc as w,rc as N,sc as y,ta as m,tb as c,ub as a,vb as d,wb as C,wc as g,xc as O}from"./chunk-YJOHUKBB.js";var A=["formContent"],J=()=>["relative z-0","mt-8"],Q=n=>({"min-height":n}),q=n=>({"opacity-0 pointer-events-none":n}),I=n=>({json:n});function G(n,r){if(n&1){let i=_();a(0,"button",7),b("click",function(){u(i);let e=l(2);return f(e.reset())}),C(1,"i",9),d()}}function X(n,r){if(n&1){let i=_();a(0,"div",2),p(1,G,2,0,"button",6),a(2,"button",7),b("click",function(){u(i);let e=l();return f(e.showEditor()?e.onConfirm():e.onEdit())}),C(3,"i",8),d()()}if(n&2){let i=l();s(),h(i.showEditor()?1:-1),s(2),c("ngClass",i.showEditor()?"bi-check-lg":"bi-pencil-square")}}function $(n,r){if(n&1){let i=_();a(0,"app-playground-editor",10),b("onEditing",function(e){u(i);let o=l();return f(o.onEditorChange(e))}),d()}if(n&2){let i=l();c("ngClass",v(5,q,!i.showEditor()))("mainMenuBar",!1)("statusBar",!1)("navigationBar",!1)("data",v(7,I,i.editorData()))}}var it=(()=>{let r=class r{constructor(){this.configs=g([]),this.configPath=g(""),this.showFormOnly=g(!1),this.minHeight=g("20rem"),this.formContent=O("formContent"),this.configsToUse=m([]),this.showEditor=m(!1),this.formHeight=m("0px"),this.editorData=m(null),this.configsUntouched=N(()=>{let t=this.configs(),e=this.configPath();if(t.length>0)return typeof t=="string"?JSON.parse(t):t;if(e){let o=e.split(".").reduce((j,z)=>j[z],S);return[...Array.isArray(o)?o:[o]]}}),this.initData=y(()=>{let t=this.configsUntouched();t&&(w(()=>{this.configsToUse.set(t),this.editorData.set(t)}),this.initData.destroy())}),this.setFormHeight=y(()=>{let t=this.formContent();t&&w(()=>{this.formHeight.set(`${t.nativeElement.scrollHeight+1}px`),this.setFormHeight.destroy()})})}onEditorChange(t){this.editorData.set(t)}onEdit(){this.showEditor.set(!0)}onConfirm(){let t=this.editorData();t&&this.configsToUse.set(structuredClone(t)),this.showEditor.set(!1)}reset(){let t=structuredClone(this.configsUntouched());this.configsToUse.set(t),this.editorData.set(t)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=D({type:r,selectors:[["app-doc-form-viewer"]],viewQuery:function(e,o){e&1&&M(o.formContent,A,5),e&2&&F()},inputs:{configs:[1,"configs"],configPath:[1,"configPath"],showFormOnly:[1,"showFormOnly"],minHeight:[1,"minHeight"]},features:[E([T({customValidators:{firstUppercase:U}})])],decls:7,vars:8,consts:[["formContent",""],[3,"ngClass"],[1,"toolbar","absolute","z-10","-top-5","right-1","flex","gap-1"],[1,"content","relative","z-0",3,"ngStyle"],[1,"block","p-1",3,"configs"],[1,"absolute","top-0","left-0","h-full","w-full","duration-100",3,"ngClass","mainMenuBar","statusBar","navigationBar","data"],["type","button"],["type","button",3,"click"],[1,"bi",3,"ngClass"],[1,"bi","bi-arrow-repeat","rotate-45"],[1,"absolute","top-0","left-0","h-full","w-full","duration-100",3,"onEditing","ngClass","mainMenuBar","statusBar","navigationBar","data"]],template:function(e,o){e&1&&(a(0,"div",1),p(1,X,4,2,"div",2),a(2,"div",3)(3,"div",null,0),C(5,"ng-dynamic-json-form",4),d(),p(6,$,1,9,"app-playground-editor",5),d()()),e&2&&(c("ngClass",x(5,J)),s(),h(o.showFormOnly()?-1:1),s(),c("ngStyle",v(6,Q,o.showEditor()?o.minHeight():o.formHeight())),s(3),c("configs",o.configsToUse()),s(),h(o.showFormOnly()?-1:6))},dependencies:[H,P,V,B,k],styles:["[_nghost-%COMP%]{display:block;margin:1rem 0}doc-tab[_nghost-%COMP%], doc-tab   [_nghost-%COMP%]{margin:0}doc-tab[_nghost-%COMP%]   .content[_ngcontent-%COMP%], doc-tab   [_nghost-%COMP%]   .content[_ngcontent-%COMP%]{transition-duration:0}.content[_ngcontent-%COMP%]{transition-duration:.3s}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:inline-flex;justify-content:center;align-items:center;width:2.5rem;height:2.5rem;border:solid 1px var(--border-color-25);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border-radius:9999px}"]});let n=r;return n})();export{it as a};
