import{A as S,C as b,Ia as j,K as D,Z as u,ba as g,bd as y,ga as l,k as p,ld as x,o as m,rc as w,ta as v}from"./chunk-YJOHUKBB.js";var C=(()=>{let s=class s{constructor(){this.http=l(y),this.versions=v([]),this.currentVersion=w(()=>this.versions()[0])}loadVersions$(){return this.collectVersionsFromDocIndex$().pipe(u(e=>{this.versions.set(e.map(t=>`v${t}`))}))}collectVersionsFromDocIndex$(){return this.http.get("assets/docs/index.md",{responseType:"text"}).pipe(m(e=>(e.match(/^## (?!.*\(deprecated\)).*$/gm)||[]).map(o=>o.split("##")[1].trim()[0]).sort().reverse()))}npmPackageVersions$(){return this.http.get("https://registry.npmjs.org/ng-dynamic-json-form",{responseType:"json"}).pipe(m(e=>{let t=e.versions;return Object.values(t).filter(r=>!r.deprecated).map(r=>r.version).reduce((r,a)=>{let h=r.findIndex(d=>d[0]===a[0]);return h<0?r.push(a):r[h]=a,r},[])}))}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();var H=(()=>{let s=class s{constructor(){this.http=l(y),this.transferState=l(j),this.versionService=l(C),this.languageDataService=l(x),this.docCache=[],this.docLoading=v(!1)}loadDoc$(e){if(!e)return p("");e.startsWith("docs/")&&(e=e.replace("docs/",""));let t=this.docCache.find(i=>i.path===e&&i.data)?.data;if(t)return p(t);let n=this.versionService.currentVersion(),o=this.languageDataService.selectedLanguage(),f=e.split("/"),r=`${f[f.length-1]}_${o}.md`,a=e.endsWith(".md")?e:`${e}/${r}`,h=`assets/docs/${n}/${a}`,d=h;return this.transferState.hasKey(d)?p(this.transferState.get(d,"")):(this.docLoading.set(!0),this.http.get(h,{responseType:"text",observe:"response"}).pipe(S(i=>(i.headers.get("Content-Type")??"").indexOf("text/markdown")>-1),m(i=>i.body??""),u(i=>{this.docCache.some($=>$.path===e)||(this.docCache.push({path:e,data:i}),this.transferState.set(d,i))}),D(()=>this.docLoading.set(!1)),b(()=>p(""))))}clearCache(){this.docCache=[]}firstContentPath$(){let e=this.languageDataService.selectedLanguage(),t=this.versionService.currentVersion(),n=`assets/docs/${t}/index_${e}.md`,o=n;return(this.transferState.hasKey(o)?p(this.transferState.get(o,"")):this.http.get(n,{responseType:"text"}).pipe(u(r=>this.transferState.set(o,r)))).pipe(m(r=>{let a=r.match(/(\.+\/){1,}.+\.md/)?.[0],d=(a?.match(/(\.*\/){1,}/)?.[0]||"")+t+"/";return a?.replace(d,"docs/")??""}),b(()=>p("")))}wrapTable(){typeof window>"u"||window.setTimeout(()=>{let e=Array.from(document.querySelectorAll("table"));for(let t of e){let n=document.createElement("div"),o=t.cloneNode(!0);(t.parentElement?.classList.contains("table-wrapper")??!1)||(n.classList.add("table-wrapper"),n.appendChild(o),t.parentElement?.insertBefore(n,t),t.remove())}})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275prov=g({token:s,factory:s.\u0275fac,providedIn:"root"});let c=s;return c})();export{C as a,H as b};
