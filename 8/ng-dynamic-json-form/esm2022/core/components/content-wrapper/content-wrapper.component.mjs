import { CommonModule } from '@angular/common';
import { Component, Input, inject } from '@angular/core';
import { ControlLayoutDirective } from '../../directives/control-layout.directive';
import { IsControlRequiredPipe } from '../../pipes/is-control-required.pipe';
import { GlobalVariableService } from '../../services/global-variable.service';
import { ErrorMessageComponent } from '../error-message/error-message.component';
import { FormLabelComponent } from '../form-label/form-label.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
class ContentWrapperComponent {
    constructor() {
        this._globalVariableService = inject(GlobalVariableService);
        this.descriptionPosition = this._globalVariableService.descriptionPosition;
        this.hideErrors$ = this._globalVariableService.hideErrorMessage$;
        this.showErrorsOnTouched = this._globalVariableService.showErrorsOnTouched;
        this.errorComponents = this._globalVariableService.errorComponents;
        this.errorTemplates = this._globalVariableService.errorTemplates;
        this.errorComponentDefault = this._globalVariableService.errorComponentDefault;
        this.errorTemplateDefault = this._globalVariableService.errorTemplateDefault;
        this.labelComponents = this._globalVariableService.labelComponents;
        this.labelTemplates = this._globalVariableService.labelTemplates;
        this.labelComponentDefault = this._globalVariableService.labelComponentDefault;
        this.labelTemplateDefault = this._globalVariableService.labelTemplateDefault;
        this.renderErrorSection = (() => {
            const typesToHide = this._globalVariableService.hideErrorsForTypes ?? [];
            const type = this.config?.type ?? 'text';
            return typesToHide.filter(Boolean).every((x) => x !== type);
        })();
    }
    get showErrors() {
        const controlTouched = this.control?.touched ?? false;
        const controlDirty = this.control?.dirty ?? false;
        const hasErrors = !!this.control?.errors;
        if (!hasErrors) {
            return false;
        }
        if (this.hideErrors$.value === false) {
            return true;
        }
        if (this.showErrorsOnTouched) {
            return controlTouched || controlDirty;
        }
        return controlDirty;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ContentWrapperComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "16.2.12", type: ContentWrapperComponent, isStandalone: true, selector: "content-wrapper", inputs: { config: "config", control: "control", collapsibleState: "collapsibleState" }, ngImport: i0, template: "<ng-container *ngIf=\"config && control\">\n  <!-- Label -->\n  <ng-container *ngIf=\"!config.layout?.hideLabel && config.label\">\n    <form-label\n      [label]=\"config.label\"\n      [layout]=\"config.layout\"\n      [props]=\"config.props\"\n      [collapsibleEl]=\"collapsibleEl\"\n      [customComponent]=\"labelComponents?.[config.formControlName] ?? labelComponentDefault\"\n      [customTemplate]=\"labelTemplates?.[config.formControlName] ?? labelTemplateDefault\"\n      [state]=\"collapsibleState\"\n      [controlLayout]=\"{\n        type: 'label',\n        layout: config.layout\n      }\"\n      [ngClass]=\"{\n        required:\n          config.layout?.autoAddRequiredClass === false\n            ? null\n            : (control | isControlRequired)\n      }\"\n    ></form-label>\n  </ng-container>\n\n  <div\n    #collapsibleEl\n    [controlLayout]=\"{\n      type: 'content',\n      layout: config.layout\n    }\"\n  >\n    <!-- Description (before) -->\n    <ng-container\n      *ngIf=\"\n        config.description &&\n        (config.layout?.descriptionPosition ?? descriptionPosition) !== 'after'\n      \"\n      [ngTemplateOutlet]=\"descriptionTemplate\"\n      [ngTemplateOutletContext]=\"{ data: config }\"\n    ></ng-container>\n\n    <ng-content></ng-content>\n\n    <!-- Validation message -->\n    <ng-container *ngIf=\"renderErrorSection\">\n      <error-message\n        [control]=\"control\"\n        [validators]=\"\n          (config.validators ?? []).concat(config.asyncValidators ?? [])\n        \"\n        [customComponent]=\"errorComponents?.[config.formControlName] ?? errorComponentDefault\"\n        [customTemplate]=\"errorTemplates?.[config.formControlName] ?? errorTemplateDefault\"\n        [controlLayout]=\"{\n          type: 'error',\n          layout: config.layout\n        }\"\n        [ngClass]=\"{\n          hidden: !showErrors\n        }\"\n      ></error-message>\n    </ng-container>\n\n    <!-- Description (after) -->\n    <ng-container\n      *ngIf=\"\n        config.description &&\n        (config.layout?.descriptionPosition ?? descriptionPosition) === 'after'\n      \"\n      [ngTemplateOutlet]=\"descriptionTemplate\"\n      [ngTemplateOutletContext]=\"{ data: config }\"\n    ></ng-container>\n  </div>\n</ng-container>\n\n<!-- Description template -->\n<ng-template #descriptionTemplate let-data=\"data\">\n  <span\n    class=\"form-description\"\n    [ngClass]=\"{\n      'position-after':\n        (data.layout?.descriptionPosition ?? descriptionPosition) === 'after'\n    }\"\n    [controlLayout]=\"{\n      type: 'description',\n      layout: data.layout\n    }\"\n    >{{ data.description }}</span\n  >\n</ng-template>\n", dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i1.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: FormLabelComponent, selector: "form-label", inputs: ["label", "layout", "props", "collapsibleEl", "state", "customComponent", "customTemplate"] }, { kind: "component", type: ErrorMessageComponent, selector: "error-message", inputs: ["control", "validators", "customComponent", "customTemplate"] }, { kind: "directive", type: ControlLayoutDirective, selector: "[controlLayout]", inputs: ["controlLayout"] }, { kind: "pipe", type: IsControlRequiredPipe, name: "isControlRequired" }] }); }
}
export { ContentWrapperComponent };
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "16.2.12", ngImport: i0, type: ContentWrapperComponent, decorators: [{
            type: Component,
            args: [{ selector: 'content-wrapper', standalone: true, imports: [
                        CommonModule,
                        FormLabelComponent,
                        ErrorMessageComponent,
                        ControlLayoutDirective,
                        IsControlRequiredPipe,
                    ], template: "<ng-container *ngIf=\"config && control\">\n  <!-- Label -->\n  <ng-container *ngIf=\"!config.layout?.hideLabel && config.label\">\n    <form-label\n      [label]=\"config.label\"\n      [layout]=\"config.layout\"\n      [props]=\"config.props\"\n      [collapsibleEl]=\"collapsibleEl\"\n      [customComponent]=\"labelComponents?.[config.formControlName] ?? labelComponentDefault\"\n      [customTemplate]=\"labelTemplates?.[config.formControlName] ?? labelTemplateDefault\"\n      [state]=\"collapsibleState\"\n      [controlLayout]=\"{\n        type: 'label',\n        layout: config.layout\n      }\"\n      [ngClass]=\"{\n        required:\n          config.layout?.autoAddRequiredClass === false\n            ? null\n            : (control | isControlRequired)\n      }\"\n    ></form-label>\n  </ng-container>\n\n  <div\n    #collapsibleEl\n    [controlLayout]=\"{\n      type: 'content',\n      layout: config.layout\n    }\"\n  >\n    <!-- Description (before) -->\n    <ng-container\n      *ngIf=\"\n        config.description &&\n        (config.layout?.descriptionPosition ?? descriptionPosition) !== 'after'\n      \"\n      [ngTemplateOutlet]=\"descriptionTemplate\"\n      [ngTemplateOutletContext]=\"{ data: config }\"\n    ></ng-container>\n\n    <ng-content></ng-content>\n\n    <!-- Validation message -->\n    <ng-container *ngIf=\"renderErrorSection\">\n      <error-message\n        [control]=\"control\"\n        [validators]=\"\n          (config.validators ?? []).concat(config.asyncValidators ?? [])\n        \"\n        [customComponent]=\"errorComponents?.[config.formControlName] ?? errorComponentDefault\"\n        [customTemplate]=\"errorTemplates?.[config.formControlName] ?? errorTemplateDefault\"\n        [controlLayout]=\"{\n          type: 'error',\n          layout: config.layout\n        }\"\n        [ngClass]=\"{\n          hidden: !showErrors\n        }\"\n      ></error-message>\n    </ng-container>\n\n    <!-- Description (after) -->\n    <ng-container\n      *ngIf=\"\n        config.description &&\n        (config.layout?.descriptionPosition ?? descriptionPosition) === 'after'\n      \"\n      [ngTemplateOutlet]=\"descriptionTemplate\"\n      [ngTemplateOutletContext]=\"{ data: config }\"\n    ></ng-container>\n  </div>\n</ng-container>\n\n<!-- Description template -->\n<ng-template #descriptionTemplate let-data=\"data\">\n  <span\n    class=\"form-description\"\n    [ngClass]=\"{\n      'position-after':\n        (data.layout?.descriptionPosition ?? descriptionPosition) === 'after'\n    }\"\n    [controlLayout]=\"{\n      type: 'description',\n      layout: data.layout\n    }\"\n    >{{ data.description }}</span\n  >\n</ng-template>\n" }]
        }], propDecorators: { config: [{
                type: Input
            }], control: [{
                type: Input
            }], collapsibleState: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGVudC13cmFwcGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2xpYi9jb3JlL2NvbXBvbmVudHMvY29udGVudC13cmFwcGVyL2NvbnRlbnQtd3JhcHBlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9saWIvY29yZS9jb21wb25lbnRzL2NvbnRlbnQtd3JhcHBlci9jb250ZW50LXdyYXBwZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV6RCxPQUFPLEVBQUUsc0JBQXNCLEVBQUUsTUFBTSwyQ0FBMkMsQ0FBQztBQUduRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUM3RSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSx3Q0FBd0MsQ0FBQztBQUMvRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUNqRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQzs7O0FBRXhFLE1BYWEsdUJBQXVCO0lBYnBDO1FBY1UsMkJBQXNCLEdBQUcsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUM7UUFNL0Qsd0JBQW1CLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLG1CQUFtQixDQUFDO1FBQ3RFLGdCQUFXLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDO1FBQzVELHdCQUFtQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxtQkFBbUIsQ0FBQztRQUV0RSxvQkFBZSxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxlQUFlLENBQUM7UUFDOUQsbUJBQWMsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsY0FBYyxDQUFDO1FBQzVELDBCQUFxQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxxQkFBcUIsQ0FBQztRQUMxRSx5QkFBb0IsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsb0JBQW9CLENBQUM7UUFFeEUsb0JBQWUsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMsZUFBZSxDQUFDO1FBQzlELG1CQUFjLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLGNBQWMsQ0FBQztRQUM1RCwwQkFBcUIsR0FBRyxJQUFJLENBQUMsc0JBQXNCLENBQUMscUJBQXFCLENBQUM7UUFDMUUseUJBQW9CLEdBQUcsSUFBSSxDQUFDLHNCQUFzQixDQUFDLG9CQUFvQixDQUFDO1FBRXhFLHVCQUFrQixHQUFHLENBQUMsR0FBRyxFQUFFO1lBQ3pCLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxrQkFBa0IsSUFBSSxFQUFFLENBQUM7WUFDekUsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLElBQUksTUFBTSxDQUFDO1lBRXpDLE9BQU8sV0FBVyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsS0FBSyxJQUFJLENBQUMsQ0FBQztRQUM5RCxDQUFDLENBQUMsRUFBRSxDQUFDO0tBcUJOO0lBbkJDLElBQUksVUFBVTtRQUNaLE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxJQUFJLEtBQUssQ0FBQztRQUN0RCxNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssSUFBSSxLQUFLLENBQUM7UUFDbEQsTUFBTSxTQUFTLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDO1FBRXpDLElBQUksQ0FBQyxTQUFTLEVBQUU7WUFDZCxPQUFPLEtBQUssQ0FBQztTQUNkO1FBRUQsSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUU7WUFDcEMsT0FBTyxJQUFJLENBQUM7U0FDYjtRQUVELElBQUksSUFBSSxDQUFDLG1CQUFtQixFQUFFO1lBQzVCLE9BQU8sY0FBYyxJQUFJLFlBQVksQ0FBQztTQUN2QztRQUVELE9BQU8sWUFBWSxDQUFDO0lBQ3RCLENBQUM7K0dBOUNVLHVCQUF1QjttR0FBdkIsdUJBQXVCLG1LQ3hCcEMsMm9GQXlGQSwyQ0QxRUksWUFBWSx3WUFDWixrQkFBa0IsNEpBQ2xCLHFCQUFxQixrSUFDckIsc0JBQXNCLGtGQUN0QixxQkFBcUI7O1NBS1osdUJBQXVCOzRGQUF2Qix1QkFBdUI7a0JBYm5DLFNBQVM7K0JBQ0UsaUJBQWlCLGNBQ2YsSUFBSSxXQUNQO3dCQUNQLFlBQVk7d0JBQ1osa0JBQWtCO3dCQUNsQixxQkFBcUI7d0JBQ3JCLHNCQUFzQjt3QkFDdEIscUJBQXFCO3FCQUN0Qjs4QkFPUSxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEFic3RyYWN0Q29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IENvbnRyb2xMYXlvdXREaXJlY3RpdmUgfSBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL2NvbnRyb2wtbGF5b3V0LmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBGb3JtQ29udHJvbENvbmZpZyB9IGZyb20gJy4uLy4uL21vZGVscyc7XG5pbXBvcnQgeyBGb3JtTGF5b3V0IH0gZnJvbSAnLi4vLi4vbW9kZWxzL2Zvcm0tbGF5b3V0LmludGVyZmFjZSc7XG5pbXBvcnQgeyBJc0NvbnRyb2xSZXF1aXJlZFBpcGUgfSBmcm9tICcuLi8uLi9waXBlcy9pcy1jb250cm9sLXJlcXVpcmVkLnBpcGUnO1xuaW1wb3J0IHsgR2xvYmFsVmFyaWFibGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvZ2xvYmFsLXZhcmlhYmxlLnNlcnZpY2UnO1xuaW1wb3J0IHsgRXJyb3JNZXNzYWdlQ29tcG9uZW50IH0gZnJvbSAnLi4vZXJyb3ItbWVzc2FnZS9lcnJvci1tZXNzYWdlLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBGb3JtTGFiZWxDb21wb25lbnQgfSBmcm9tICcuLi9mb3JtLWxhYmVsL2Zvcm0tbGFiZWwuY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnY29udGVudC13cmFwcGVyJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBGb3JtTGFiZWxDb21wb25lbnQsXG4gICAgRXJyb3JNZXNzYWdlQ29tcG9uZW50LFxuICAgIENvbnRyb2xMYXlvdXREaXJlY3RpdmUsXG4gICAgSXNDb250cm9sUmVxdWlyZWRQaXBlLFxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vY29udGVudC13cmFwcGVyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVzOiBbXSxcbn0pXG5leHBvcnQgY2xhc3MgQ29udGVudFdyYXBwZXJDb21wb25lbnQge1xuICBwcml2YXRlIF9nbG9iYWxWYXJpYWJsZVNlcnZpY2UgPSBpbmplY3QoR2xvYmFsVmFyaWFibGVTZXJ2aWNlKTtcblxuICBASW5wdXQoKSBjb25maWc/OiBGb3JtQ29udHJvbENvbmZpZztcbiAgQElucHV0KCkgY29udHJvbD86IEFic3RyYWN0Q29udHJvbDtcbiAgQElucHV0KCkgY29sbGFwc2libGVTdGF0ZT86IEZvcm1MYXlvdXRbJ2NvbnRlbnRDb2xsYXBzaWJsZSddO1xuXG4gIGRlc2NyaXB0aW9uUG9zaXRpb24gPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UuZGVzY3JpcHRpb25Qb3NpdGlvbjtcbiAgaGlkZUVycm9ycyQgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UuaGlkZUVycm9yTWVzc2FnZSQ7XG4gIHNob3dFcnJvcnNPblRvdWNoZWQgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2Uuc2hvd0Vycm9yc09uVG91Y2hlZDtcblxuICBlcnJvckNvbXBvbmVudHMgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UuZXJyb3JDb21wb25lbnRzO1xuICBlcnJvclRlbXBsYXRlcyA9IHRoaXMuX2dsb2JhbFZhcmlhYmxlU2VydmljZS5lcnJvclRlbXBsYXRlcztcbiAgZXJyb3JDb21wb25lbnREZWZhdWx0ID0gdGhpcy5fZ2xvYmFsVmFyaWFibGVTZXJ2aWNlLmVycm9yQ29tcG9uZW50RGVmYXVsdDtcbiAgZXJyb3JUZW1wbGF0ZURlZmF1bHQgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UuZXJyb3JUZW1wbGF0ZURlZmF1bHQ7XG5cbiAgbGFiZWxDb21wb25lbnRzID0gdGhpcy5fZ2xvYmFsVmFyaWFibGVTZXJ2aWNlLmxhYmVsQ29tcG9uZW50cztcbiAgbGFiZWxUZW1wbGF0ZXMgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UubGFiZWxUZW1wbGF0ZXM7XG4gIGxhYmVsQ29tcG9uZW50RGVmYXVsdCA9IHRoaXMuX2dsb2JhbFZhcmlhYmxlU2VydmljZS5sYWJlbENvbXBvbmVudERlZmF1bHQ7XG4gIGxhYmVsVGVtcGxhdGVEZWZhdWx0ID0gdGhpcy5fZ2xvYmFsVmFyaWFibGVTZXJ2aWNlLmxhYmVsVGVtcGxhdGVEZWZhdWx0O1xuXG4gIHJlbmRlckVycm9yU2VjdGlvbiA9ICgoKSA9PiB7XG4gICAgY29uc3QgdHlwZXNUb0hpZGUgPSB0aGlzLl9nbG9iYWxWYXJpYWJsZVNlcnZpY2UuaGlkZUVycm9yc0ZvclR5cGVzID8/IFtdO1xuICAgIGNvbnN0IHR5cGUgPSB0aGlzLmNvbmZpZz8udHlwZSA/PyAndGV4dCc7XG5cbiAgICByZXR1cm4gdHlwZXNUb0hpZGUuZmlsdGVyKEJvb2xlYW4pLmV2ZXJ5KCh4KSA9PiB4ICE9PSB0eXBlKTtcbiAgfSkoKTtcblxuICBnZXQgc2hvd0Vycm9ycygpOiBib29sZWFuIHtcbiAgICBjb25zdCBjb250cm9sVG91Y2hlZCA9IHRoaXMuY29udHJvbD8udG91Y2hlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBjb250cm9sRGlydHkgPSB0aGlzLmNvbnRyb2w/LmRpcnR5ID8/IGZhbHNlO1xuICAgIGNvbnN0IGhhc0Vycm9ycyA9ICEhdGhpcy5jb250cm9sPy5lcnJvcnM7XG5cbiAgICBpZiAoIWhhc0Vycm9ycykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhpZGVFcnJvcnMkLnZhbHVlID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2hvd0Vycm9yc09uVG91Y2hlZCkge1xuICAgICAgcmV0dXJuIGNvbnRyb2xUb3VjaGVkIHx8IGNvbnRyb2xEaXJ0eTtcbiAgICB9XG5cbiAgICByZXR1cm4gY29udHJvbERpcnR5O1xuICB9XG59XG4iLCI8bmctY29udGFpbmVyICpuZ0lmPVwiY29uZmlnICYmIGNvbnRyb2xcIj5cbiAgPCEtLSBMYWJlbCAtLT5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb25maWcubGF5b3V0Py5oaWRlTGFiZWwgJiYgY29uZmlnLmxhYmVsXCI+XG4gICAgPGZvcm0tbGFiZWxcbiAgICAgIFtsYWJlbF09XCJjb25maWcubGFiZWxcIlxuICAgICAgW2xheW91dF09XCJjb25maWcubGF5b3V0XCJcbiAgICAgIFtwcm9wc109XCJjb25maWcucHJvcHNcIlxuICAgICAgW2NvbGxhcHNpYmxlRWxdPVwiY29sbGFwc2libGVFbFwiXG4gICAgICBbY3VzdG9tQ29tcG9uZW50XT1cImxhYmVsQ29tcG9uZW50cz8uW2NvbmZpZy5mb3JtQ29udHJvbE5hbWVdID8/IGxhYmVsQ29tcG9uZW50RGVmYXVsdFwiXG4gICAgICBbY3VzdG9tVGVtcGxhdGVdPVwibGFiZWxUZW1wbGF0ZXM/Lltjb25maWcuZm9ybUNvbnRyb2xOYW1lXSA/PyBsYWJlbFRlbXBsYXRlRGVmYXVsdFwiXG4gICAgICBbc3RhdGVdPVwiY29sbGFwc2libGVTdGF0ZVwiXG4gICAgICBbY29udHJvbExheW91dF09XCJ7XG4gICAgICAgIHR5cGU6ICdsYWJlbCcsXG4gICAgICAgIGxheW91dDogY29uZmlnLmxheW91dFxuICAgICAgfVwiXG4gICAgICBbbmdDbGFzc109XCJ7XG4gICAgICAgIHJlcXVpcmVkOlxuICAgICAgICAgIGNvbmZpZy5sYXlvdXQ/LmF1dG9BZGRSZXF1aXJlZENsYXNzID09PSBmYWxzZVxuICAgICAgICAgICAgPyBudWxsXG4gICAgICAgICAgICA6IChjb250cm9sIHwgaXNDb250cm9sUmVxdWlyZWQpXG4gICAgICB9XCJcbiAgICA+PC9mb3JtLWxhYmVsPlxuICA8L25nLWNvbnRhaW5lcj5cblxuICA8ZGl2XG4gICAgI2NvbGxhcHNpYmxlRWxcbiAgICBbY29udHJvbExheW91dF09XCJ7XG4gICAgICB0eXBlOiAnY29udGVudCcsXG4gICAgICBsYXlvdXQ6IGNvbmZpZy5sYXlvdXRcbiAgICB9XCJcbiAgPlxuICAgIDwhLS0gRGVzY3JpcHRpb24gKGJlZm9yZSkgLS0+XG4gICAgPG5nLWNvbnRhaW5lclxuICAgICAgKm5nSWY9XCJcbiAgICAgICAgY29uZmlnLmRlc2NyaXB0aW9uICYmXG4gICAgICAgIChjb25maWcubGF5b3V0Py5kZXNjcmlwdGlvblBvc2l0aW9uID8/IGRlc2NyaXB0aW9uUG9zaXRpb24pICE9PSAnYWZ0ZXInXG4gICAgICBcIlxuICAgICAgW25nVGVtcGxhdGVPdXRsZXRdPVwiZGVzY3JpcHRpb25UZW1wbGF0ZVwiXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldENvbnRleHRdPVwieyBkYXRhOiBjb25maWcgfVwiXG4gICAgPjwvbmctY29udGFpbmVyPlxuXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuXG4gICAgPCEtLSBWYWxpZGF0aW9uIG1lc3NhZ2UgLS0+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJlbmRlckVycm9yU2VjdGlvblwiPlxuICAgICAgPGVycm9yLW1lc3NhZ2VcbiAgICAgICAgW2NvbnRyb2xdPVwiY29udHJvbFwiXG4gICAgICAgIFt2YWxpZGF0b3JzXT1cIlxuICAgICAgICAgIChjb25maWcudmFsaWRhdG9ycyA/PyBbXSkuY29uY2F0KGNvbmZpZy5hc3luY1ZhbGlkYXRvcnMgPz8gW10pXG4gICAgICAgIFwiXG4gICAgICAgIFtjdXN0b21Db21wb25lbnRdPVwiZXJyb3JDb21wb25lbnRzPy5bY29uZmlnLmZvcm1Db250cm9sTmFtZV0gPz8gZXJyb3JDb21wb25lbnREZWZhdWx0XCJcbiAgICAgICAgW2N1c3RvbVRlbXBsYXRlXT1cImVycm9yVGVtcGxhdGVzPy5bY29uZmlnLmZvcm1Db250cm9sTmFtZV0gPz8gZXJyb3JUZW1wbGF0ZURlZmF1bHRcIlxuICAgICAgICBbY29udHJvbExheW91dF09XCJ7XG4gICAgICAgICAgdHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICBsYXlvdXQ6IGNvbmZpZy5sYXlvdXRcbiAgICAgICAgfVwiXG4gICAgICAgIFtuZ0NsYXNzXT1cIntcbiAgICAgICAgICBoaWRkZW46ICFzaG93RXJyb3JzXG4gICAgICAgIH1cIlxuICAgICAgPjwvZXJyb3ItbWVzc2FnZT5cbiAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgIDwhLS0gRGVzY3JpcHRpb24gKGFmdGVyKSAtLT5cbiAgICA8bmctY29udGFpbmVyXG4gICAgICAqbmdJZj1cIlxuICAgICAgICBjb25maWcuZGVzY3JpcHRpb24gJiZcbiAgICAgICAgKGNvbmZpZy5sYXlvdXQ/LmRlc2NyaXB0aW9uUG9zaXRpb24gPz8gZGVzY3JpcHRpb25Qb3NpdGlvbikgPT09ICdhZnRlcidcbiAgICAgIFwiXG4gICAgICBbbmdUZW1wbGF0ZU91dGxldF09XCJkZXNjcmlwdGlvblRlbXBsYXRlXCJcbiAgICAgIFtuZ1RlbXBsYXRlT3V0bGV0Q29udGV4dF09XCJ7IGRhdGE6IGNvbmZpZyB9XCJcbiAgICA+PC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuPC9uZy1jb250YWluZXI+XG5cbjwhLS0gRGVzY3JpcHRpb24gdGVtcGxhdGUgLS0+XG48bmctdGVtcGxhdGUgI2Rlc2NyaXB0aW9uVGVtcGxhdGUgbGV0LWRhdGE9XCJkYXRhXCI+XG4gIDxzcGFuXG4gICAgY2xhc3M9XCJmb3JtLWRlc2NyaXB0aW9uXCJcbiAgICBbbmdDbGFzc109XCJ7XG4gICAgICAncG9zaXRpb24tYWZ0ZXInOlxuICAgICAgICAoZGF0YS5sYXlvdXQ/LmRlc2NyaXB0aW9uUG9zaXRpb24gPz8gZGVzY3JpcHRpb25Qb3NpdGlvbikgPT09ICdhZnRlcidcbiAgICB9XCJcbiAgICBbY29udHJvbExheW91dF09XCJ7XG4gICAgICB0eXBlOiAnZGVzY3JpcHRpb24nLFxuICAgICAgbGF5b3V0OiBkYXRhLmxheW91dFxuICAgIH1cIlxuICAgID57eyBkYXRhLmRlc2NyaXB0aW9uIH19PC9zcGFuXG4gID5cbjwvbmctdGVtcGxhdGU+XG4iXX0=