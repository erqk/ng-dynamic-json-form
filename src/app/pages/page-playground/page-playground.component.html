<div
  class="relative z-0 flex"
  [ngStyle]="{
    '--header-height.px': headerHeight$.value,
    '--window-height.px': windowSize$.value.y,
    '--panel-width': '20rem'
  }"
>
  <div
    [ngClass]="[
      'fixed bottom-0 w-full z-10 overflow-hidden pointer-events-none',
      'flex items-center',
      'h-[calc(100vh-var(--header-height))]'
    ]"
  >
    <div
      [ngClass]="[
        'flex flex-col shrink-0 pointer-events-auto',
        'h-full w-[calc(var(--panel-width)+var(--gutter-auto))]',
        'min-w-[var(--panel-width)]',
        'border-r border-[var(--border-color-25)]',
        'pl-[var(--gutter-auto)]',
        'bg-[var(--body-bg-color)]',
        showEditor ? 'shadow-2xl' : ''
      ]"
    >
      <div
        [ngClass]="[
          'flex gap-2 px-4 py-2 m-2 mt-4',
          'rounded-full text-sm font-bold bg-[rgba(128,128,128,0.1)]'
        ]"
      >
        <span>NgDynamicJsonForm</span>
        <span class="uppercase">{{ currentVersion }}</span>
      </div>

      <app-playground-template-list
        class="block overflow-hidden"
        (onEdit)="onTemplateEdit($event)"
      ></app-playground-template-list>
    </div>

    <app-playground-editor
      [class]="
        [
          'relative -z-10 pointer-events-auto',
          'h-full w-[calc(100vw-var(--panel-width)-2em)]',
          'max-w-[calc(85rem-var(--panel-width))]',
          'max-h-[calc(100%-2rem)]',
          'shadow-lg',
          'duration-300 transition-transform ease-[cubic-bezier(.11,.99,.57,1)]',
          showEditor ? 'translate-x-0' : 'translate-x-[calc(-100%-1rem)]'
        ].join(' ')
      "
      (onConfirm)="onEditorConfirm($event)"
    ></app-playground-editor>
  </div>

  <ui-content-wrapper [maxWidth]="'var(--page-max-width)'">
    <div [ngClass]="['flex-1 w-full', 'pl-[var(--panel-width)]']">
      <as-split
        class="!overflow-visible"
        [useTransition]="true"
        [gutterSize]="1"
        [gutterDblClickDuration]="300"
        (dragEnd)="onAsSplitDragEnd($event)"
        (gutterDblClick)="resetSplitSizes()"
      >
        <as-split-area class="flex !overflow-hidden" [size]="asSplitSizes[0]">
          <div
            [ngClass]="[
              'w-full h-full px-8 py-10',
              'overflow-auto beauty-scrollbar'
            ]"
          >
            <ng-dynamic-json-form
              [configs]="(configs$ | async) ?? []"
              (formGet)="onFormGet($event)"
            ></ng-dynamic-json-form>
          </div>
        </as-split-area>

        <as-split-area
          [ngClass]="[
            'sticky top-[var(--header-height)] !overflow-hidden',
            '!h-[calc(100vh-var(--header-height))]'
          ]"
          [size]="asSplitSizes[1]"
        >
          <app-playground-form-info [form]="form"></app-playground-form-info>
        </as-split-area>
      </as-split>
    </div>
  </ui-content-wrapper>
</div>
