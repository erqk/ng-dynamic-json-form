<ng-container *ngIf="!customComponent && control && data">
  <label class="input-label">{{ data.label }}</label>

  <ng-container *ngIf="!data.options?.length" [ngSwitch]="data.type">
    <!-- Switch button -->
    <ng-container *ngSwitchCase="'switch'">
      <label class="switch-button">
        <input type="checkbox" [formControl]="control" />
        <span class="marker"></span>
      </label>
    </ng-container>

    <!-- Default (Input field) -->
    <ng-container *ngSwitchDefault>
      <input [attr.type]="data.type ?? null" [formControl]="control" />
    </ng-container>
  </ng-container>

  <div
    *ngIf="!!data.options?.length"
    [ngSwitch]="data.type"
    class="group-buttons"
    [ngStyle]="{
      'flex-direction': data.optionsLayout
    }"
  >
    <!-- Dropdown -->
    <ng-container *ngSwitchCase="'dropdown'">
      <select [formControl]="control">
        <option *ngFor="let item of data.options" [value]="item.value">
          {{ item.label }}
        </option>
      </select>
    </ng-container>

    <!-- Must set the input type explicitly (not using variable),
      otherwise will not working properly when using radio buttons etc.
    -->

    <!-- Radio buttons -->
    <ng-container *ngSwitchCase="'radio'">
      <ng-container *ngFor="let item of data.options">
        <label class="option-button">
          <input type="radio" [value]="item.value" [formControl]="control" />

          <span class="marker"></span>
          <span>{{ item.label }}</span>
        </label>
      </ng-container>
    </ng-container>

    <!-- Checkboxes -->
    <ng-container *ngSwitchCase="'checkbox'">
      <ng-container *ngFor="let item of data.options">
        <label class="option-button">
          <input
            type="checkbox"
            [value]="item.value"
            [checked]="control.value.includes(item.value)"
            (change)="onCheckboxChange($event)"
          />

          <span class="marker"></span>
          <span>{{ item.label }}</span>
        </label>
      </ng-container>
    </ng-container>
  </div>

  <!-- Error messages -->
  <ng-container *ngIf="control.touched || control.value">
    <div class="errors-container">
      <ng-container *ngFor="let error of errors$ | async">
        <div class="error">{{ error }}</div>
      </ng-container>
    </div>
  </ng-container>
</ng-container>

<ng-container *ngIf="customComponent && data">
  <label class="input-label">{{ data.label }}</label>
</ng-container>
<ng-container dynamicComponentAnchor></ng-container>
