<ng-container *ngIf="data">
  <div
    class="input-container"
    [ngClass]="{
      disabled: !useCustomLoading && loading,
      hidden: useCustomLoading && loading
    }"
  >
    <!-- Input template -->
    <ng-container
      *ngIf="inputTemplates?.[data?.customComponent ?? '']"
      [ngTemplateOutlet]="inputTemplates![data.customComponent!]"
      [ngTemplateOutletContext]="{
        control,
        data,
        errorMessages
      }"
    ></ng-container>

    <!-- Input component -->
    <ng-container
      *ngIf="!inputTemplates?.[data?.customComponent ?? '']"
      #inputComponentAnchor
    ></ng-container>
  </div>

  <div class="loading-container" [ngClass]="{ hidden: !loading }">
    <!-- Loading component -->
    <ng-container *ngIf="layoutComponents?.loading">
      <ng-container
        *ngComponentOutlet="layoutComponents!.loading!"
      ></ng-container>
    </ng-container>

    <!-- Loading template -->
    <ng-container
      *ngIf="layoutTemplates?.loading"
      [ngTemplateOutlet]="layoutTemplates!.loading!"
    >
    </ng-container>
  </div>

  <error-message
    [control]="control"
    [validators]="data.validators"
    [layout]="data.layout"
    [layoutComponents]="layoutComponents"
    [layoutTemplates]="layoutTemplates"
    [hideErrorMessage]="hideErrorMessage"
    (errorMessagesGet)="onErrorMessagesGet($event)"
  ></error-message>
</ng-container>
